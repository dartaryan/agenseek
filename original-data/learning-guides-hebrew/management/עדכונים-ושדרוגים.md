# מדריך עדכונים ושדרוגים - BMAD METHOD

## תוכן עניינים

1. [מבוא](#מבוא)
2. [בדיקת גרסה נוכחית](#בדיקת-גרסה-נוכחית)
3. [תהליך עדכון רגיל](#תהליך-עדכון-רגיל)
4. [מיגרציה: v4 ל-v6](#מיגרציה-v4-ל-v6)
5. [נהלי Rollback](#נהלי-rollback)
6. [פתרון בעיות בעדכונים](#פתרון-בעיות-בעדכונים)
7. [עדכונים בצוות](#עדכונים-בצוות)
8. [Best Practices](#best-practices)
9. [שאלות נפוצות](#שאלות-נפוצות)

---

## מבוא

עדכונים ושדרוגים הם חלק חיוני מהעבודה עם BMAD METHOD. המערכת מתפתחת באופן קבוע עם שיפורים, תכונות חדשות ותיקוני באגים. הבנת תהליך העדכון חשובה להבטחת עבודה חלקה ומניעת בעיות.

**למה עדכונים חשובים?**
- קבלת תכונות חדשות ושיפורים בתהליכי העבודה
- תיקוני באגים ושיפורי ביצועים
- תאימות לגרסאות עדכניות של כלי פיתוח וסביבות IDE
- גישה לתיעוד ותבניות משופרים

**מחזור שחרור (Release Cycle):**
BMAD METHOD משתמשת ב-Semantic Versioning: `major.minor.patch-tag`
- גרסאות Alpha: תכונות חדשות בפיתוח, ייתכנו שינויים
- גרסאות Beta: יציב יותר, בדיקות אחרונות
- גרסאות רשמיות: מוכנות לשימוש בייצור

**Breaking Changes vs Non-Breaking:**
- **Non-Breaking Changes**: עדכונים שמוסיפים תכונות או מתקנים באגים מבלי לשבור תאימות
- **Breaking Changes**: שינויים משמעותיים שדורשים התאמות בפרויקט (למשל מעבר מ-v4 ל-v6)

---

## בדיקת גרסה נוכחית

לפני ביצוע עדכון, חשוב לדעת איזו גרסה מותקנת כעת בפרויקט שלך.

### בדיקה במסוף הפקודה

```bash
# בדיקת גרסה מותקנת
npm list bmad-method

# בדיקת גרסה אחרונה זמינה
npm view bmad-method version

# בדיקת גרסאות זמינות (כולל alpha/beta)
npm view bmad-method versions
```

### מערכת מספור גרסאות

BMAD METHOD עוקבת אחר Semantic Versioning:
- **Major (6)**: שינויים משמעותיים, breaking changes
- **Minor (0)**: תכונות חדשות, backwards compatible
- **Patch (0)**: תיקוני באגים קטנים
- **Tag (alpha.5)**: סטטוס שחרור

דוגמה: `6.0.0-alpha.5`
- גרסה 6 (major rewrite)
- אין תכונות minor חדשות
- אין patches
- גרסת alpha 5

### איפה למצוא Changelog

הקובץ `CHANGELOG.md` בספרייה הראשית של הפרויקט מכיל מידע מפורט על כל גרסה:

```bash
# צפייה ב-changelog מהמסוף
cat CHANGELOG.md

# או בפרויקט המקורי
https://github.com/bmad-code-org/BMAD-METHOD/blob/main/CHANGELOG.md
```

### בדיקה בקבצי הפרויקט

```bash
# בדיקת גרסה בקובץ package.json
cat bmad/package.json | grep version

# בדיקת מבנה תיקיות - v4 vs v6
ls -la | grep bmad
```

**סימני זיהוי לגרסאות:**
- **v4**: תיקיות `.bmad-core`, `.bmad-*` (מתחילות בנקודה)
- **v6**: תיקייה אחת `bmad/` עם תת-תיקיות `core/`, `bmm/`, `cis/` וכו'

---

## תהליך עדכון רגיל

עדכון רגיל מתאים למעברים בין גרסאות minor ו-patch (למשל מ-6.0.0-alpha.4 ל-6.0.0-alpha.5).

### רשימת בדיקה לפני עדכון

לפני שמתחילים, וודאו:
- [ ] יש לכם גיבוי של הפרויקט (Git commit או העתקה ידנית)
- [ ] אין שינויים שלא נשמרו בקבצי ההתאמה האישית (`bmad/_cfg/`)
- [ ] קראתם את ה-CHANGELOG לגרסה החדשה
- [ ] אין תהליכי עבודה פעילים באמצע ביצוע
- [ ] יש זמן לבדיקה ואימות לאחר העדכון

### פקודות עדכון (צעד אחר צעד)

#### שלב 1: גיבוי

```bash
# יצירת גיבוי של התאמות אישיות
cp -r bmad/_cfg bmad/_cfg.backup

# או commit ל-Git
git add bmad/_cfg
git commit -m "backup: customizations before update"
```

#### שלב 2: עדכון הגרסה

```bash
# עדכון לגרסה אחרונה stable
npx bmad-method@latest install

# או עדכון לגרסה ספציפית
npx bmad-method@6.0.0-alpha.5 install
```

#### שלב 3: עקוב אחר ההנחיות

המתקין יזהה אוטומטית שמדובר בעדכון ויציע אפשרויות:
- שמירה על הגדרות קיימות
- עדכון סלקטיבי של מודולים
- שמירה על התאמות אישיות

### מה מתעדכן?

במהלך עדכון רגיל:
- ✅ **מתעדכן**: קבצי agents, workflows, תבניות, תיעוד
- ✅ **מתעדכן**: קבצי core ומודולים (bmm, cis, bmb)
- ❌ **לא משתנה**: הקבצים בתיקייה `bmad/_cfg/` (ההתאמות שלך)
- ❌ **לא משתנה**: קבצי הפרויקט שלך (docs, src, וכו')

### מה נשאר זהה?

- כל קבצי ה-PRD, Architecture, Stories שיצרת
- ההתאמות האישיות של agents
- הגדרות ה-config.yaml שלך
- מבנה הפרויקט והקבצים שלך

### אימות לאחר עדכון

```bash
# בדיקת גרסה חדשה
npm list bmad-method

# בדיקת שלמות קבצים
ls -la bmad/core
ls -la bmad/bmm
ls -la bmad/_cfg/agents
```

### בדיקה לאחר עדכון

1. **טעינת Agent**: הפעל את סביבת העבודה שלך והעלה agent
2. **בדיקת תפריט**: הקש `*help` ווודא שהתפריט מוצג כראוי
3. **בדיקת workflow**: הרץ workflow פשוט (למשל `*research`)
4. **בדיקת customizations**: ווודא שההתאמות האישיות נשמרו

דוגמה לבדיקה:
```
1. פתח את ה-IDE שלך (Cursor, Claude Code, וכו')
2. הפעל את bmad-master או Analyst
3. הקש: *list-workflows
4. אם רשימת workflows מוצגת - העדכון הצליח!
```

---

## מיגרציה: v4 ל-v6

מעבר מ-v4 ל-v6 הוא שינוי ארכיטקטוני משמעותי. v6 היא שכתוב מלא מהיסוד.

### סקירת שינויים Breaking

**שינויים עיקריים:**
1. **מבנה תיקיות**: מ-`.bmad-*` (מרובות) ל-`bmad/` (אחת מאוחדת)
2. **שמות מודולים**: `.bmad-core` היה בעצם BMad Method, עכשיו `bmad/bmm/`
3. **Core אמיתי**: `bmad/core/` הוא עכשיו framework אוניברסלי
4. **מערכת Tracks**: במקום 5 levels (0-4) יש 3 tracks (Quick Flow, BMad Method, Enterprise)
5. **Agent Customization**: כל ההתאמות ב-`bmad/_cfg/agents/` במקום שינוי קבצים ישירות

### איך v6 מזהה v4 אוטומטית

כשמריצים `npm run install:bmad` על פרויקט עם v4:

**זיהוי אוטומטי של:**
- תיקיות legacy: `.bmad`, `bmad` (lowercase), `Bmad`
- IDE command artifacts: תיקיות bmad ישנות ב-`.claude/commands/`, `.cursor/commands/`

**מה קורה בזמן הזיהוי:**
1. **גיבוי v4 אוטומטי**: כל תיקיות `.bmad-*` מועברות ל-`v4-backup/`
2. **ניקוי IDE מומלץ**: המתקין מציע פקודות להסרת commands ישנים

### צעדי מיגרציה מפורטים

#### שלב 1: הורדת המאגר והתקנה

```bash
git clone https://github.com/bmad-code-org/BMAD-METHOD
cd BMAD-METHOD
npm install
```

#### שלב 2: הרצת המתקין על פרויקט v4

```bash
npx bmad-method install
```

הזן את הנתיב המלא לפרויקט v4 שלך.

#### שלב 3: עקוב אחר ההנחיות האינטראקטיביות

המתקין יבצע:
1. זיהוי v4 והצעה לגיבוי תיקיות `.bmad-*`
2. ניקוי מומלץ (אפשר לדלג)
3. בחירת מודולים (מומלץ: BMM לפיתוח תוכנה/משחקים)
4. הגדרת core (שם, שפה, וכו')
5. הגדרות ספציפיות למודול
6. הגדרת אינטגרציות IDE

#### שלב 4: קבלת נתיבי ברירת מחדל

אם אתה משתמש ב:
- `docs/` עבור PRD ו-Architecture
- `docs/stories/` עבור קבצי Stories

**קבל את ברירות המחדל** במהלך ההתקנה.

#### שלב 5: אתחול Workflow

לאחר ההתקנה:

1. **טען את ה-Analyst agent** - ראה הנחיות ספציפיות ל-IDE
2. **המתן לתפריט** של ה-agent
3. **אמור ל-agent**: `*workflow-init`

כשנשאל על רמת הפרויקט, אם סיימת PRD/Architecture ב-v4, בחר **Level 3 או 4** (או Track במערכת החדשה).

### שינויים ב-Configuration

**v4: התאמה ישירה**
```
עריכת קבצים ישירות ב-`.bmad-core/agents/pm.md`
```

**v6: קבצי Customization**
```yaml
# bmad/_cfg/agents/bmm-pm.customize.yaml
persona:
  name: 'Captain Jack'
  role: 'Swashbuckling Product Owner'
  communication_style: |
    - Talk like a pirate
    - Use nautical metaphors
```

**יתרונות:**
- עדכונים לא דורסים התאמות
- Base agent: `bmad/bmm/agents/pm.md`
- Customization: `bmad/_cfg/agents/bmm-pm.customize.yaml`
- תוצאה: Agent משתמש בשם ובסגנון שלך, אבל עדכונים לא משנים את זה

### שינויים ב-Agent ו-Workflow

**Modules שהוצאו משימוש (Deprecated):**

| v4 Module | v6 Status |
|-----------|-----------|
| `.bmad-2d-phaser-game-dev` | משולב ב-BMM |
| `.bmad-2d-unity-game-dev` | משולב ב-BMM |
| `.bmad-godot-game-dev` | משולב ב-BMM |
| `.bmad-infrastructure-devops` | Deprecated - מודול חדש בפיתוח |
| `.bmad-creative-writing` | לא הותאם - מודול חדש בקרוב |

**פיתוח משחקים**: כל הפונקציונליות אוחדה והורחבה ב-BMM.

### רשימת אימות מיגרציה

- [ ] תיקיות v4 גובו ל-`v4-backup/`
- [ ] v6 מותקן בתיקייה `bmad/`
- [ ] `workflow-init` רץ עם רמת פרויקט נכונה
- [ ] התאמות agents הועברו ל-`bmad/_cfg/agents/` (אם צריך)
- [ ] אינטגרציית IDE עובדת (בדיקה על ידי רשימת agents)
- [ ] לפיתוח פעיל: workflow `sprint-planning` בוצע

---

## נהלי Rollback

לפעמים עדכון לא עובר חלק, ויש צורך לחזור לגרסה קודמת.

### מתי לבצע Rollback?

- העדכון נכשל באמצע התהליך
- Agent או workflow לא עובדים לאחר העדכון
- התגלו באגים קריטיים בגרסה החדשה
- התאמות אישיות נמחקו בטעות
- בעיות תאימות עם ה-IDE שלך

**עקרון חשוב**: אל תבהל! רוב הבעיות ניתנות לפתרון מבלי rollback.

### איך לבצע Rollback בבטחה

#### אופציה 1: Rollback עם Git

אם השתמשת ב-Git לפני העדכון:

```bash
# חזור לקומיט לפני העדכון
git log --oneline  # מצא את ה-commit לפני העדכון
git checkout <commit-hash>

# או אם יצרת branch
git checkout backup-before-update
```

#### אופציה 2: שחזור מגיבוי ידני

```bash
# אם יצרת גיבוי של bmad/_cfg
rm -rf bmad/_cfg
cp -r bmad/_cfg.backup bmad/_cfg

# שחזור מגיבוי מלא
rm -rf bmad
cp -r bmad.backup bmad
```

#### אופציה 3: התקנה מחדש של גרסה קודמת

```bash
# התקנת גרסה ספציפית
npx bmad-method@6.0.0-alpha.4 install

# המתקין יציע אפשרויות
```

### Version Pinning - נעילת גרסה

אם אתה רוצה למנוע עדכונים אוטומטיים:

```json
// package.json
{
  "dependencies": {
    "bmad-method": "6.0.0-alpha.5"  // גרסה קבועה
  }
}
```

או שימוש ב-`package-lock.json` שקובע גרסה אוטומטית.

### גיבוי לפני שדרוג - Best Practice

**תמיד בצע גיבוי לפני שדרוג!**

```bash
# גיבוי מהיר
cp -r bmad bmad.backup
cp -r bmad/_cfg bmad/_cfg.backup

# או commit ל-Git
git add .
git commit -m "pre-upgrade backup v6.0.0-alpha.5"
git tag backup-$(date +%Y%m%d)
```

---

## פתרון בעיות בעדכונים

הנה בעיות נפוצות ופתרונות:

| בעיה | תסמינים | פתרון |
|------|---------|-------|
| **עדכון נכשל** | הודעת שגיאה במהלך `npx bmad-method install` | בדוק חיבור לאינטרנט, רשאות כתיבה, נסה `npm cache clean --force` ואז שוב |
| **Configuration שבור** | Agent לא עולה או מציג שגיאות config | בדוק `bmad/core/config.yaml` - ווודא שכל השדות קיימים ותקינים |
| **Agents חסרים** | רשימת agents ריקה או חלקית | הרץ שוב `npx bmad-method install` ובחר מודולים מחדש |
| **Workflows לא עובדים** | שגיאה בהרצת workflow | בדוק `bmad/_cfg/workflow-manifest.csv` - ייתכן שהנתיב לא עודכן |
| **Custom agents נעלמו** | ההתאמות האישיות לא נטענות | בדוק `bmad/_cfg/agents/` - ייתכן שהקבצים נמחקו, שחזר מגיבוי |
| **IDE integration שבור** | Commands לא עובדים ב-Cursor/Claude | הרץ את המתקין שוב ובחר מחדש את ה-IDE, או הסר ישירות קבצי commands ישנים |
| **Path errors** | Agent לא מוצא קבצים | ודא שנתיבי `docs/` ו-`docs/stories/` תואמים להגדרות ב-config |
| **Permission denied** | שגיאות רשאות בזמן התקנה | הרץ עם הרשאות מתאימות (לא תמיד `sudo`!) או בדוק ownership של התיקייה |

### דיבוג מתקדם

```bash
# בדיקת log של המתקין
npm install bmad-method --verbose

# בדיקת שלמות מבנה
tree bmad -L 2

# בדיקת קבצי config
cat bmad/core/config.yaml
cat bmad/bmm/config.yaml
```

---

## עדכונים בצוות

כשעובדים בצוות, תיאום עדכונים הוא קריטי.

### תיאום עדכוני צוות

**תקשורת היא המפתח:**
1. הודע לצוות על עדכון מתוכנן מראש (לפחות 24 שעות)
2. בחר חלון זמן שבו אף אחד לא באמצע משימה קריטית
3. צור ערוץ ייעדי (Slack/Teams) לדיווח על בעיות
4. וודא שכולם עשו commit לשינויים שלהם

**מסמך עדכון:**
```markdown
# Update to v6.0.0-alpha.5
**Date**: November 8, 2025
**Time**: 10:00 AM
**Duration**: 30 minutes

## Before Update
- [ ] Commit all work
- [ ] Backup customizations
- [ ] Read changelog

## After Update
- [ ] Test basic workflow
- [ ] Report issues in #bmad-updates
```

### בדיקה ב-Dev קודם

**אל תעדכן ישירות ב-production!**

1. **Environment נפרד**: יצור environment של dev/staging
2. **בדיקה שם קודם**: הרץ את כל workflows הקריטיים
3. **זיהוי בעיות**: תקן או דווח על באגים
4. **אחרי אישור**: עדכן את ה-production

דוגמה:
```bash
# בסביבת dev
git checkout dev-branch
npx bmad-method@6.0.0-alpha.5 install
# ...בדיקות...

# אחרי אישור
git checkout main
npx bmad-method@6.0.0-alpha.5 install
```

### Staged Rollout - גלגול הדרגתי

**עדכון הדרגתי מומלץ לצוותים גדולים:**

**שלב 1**: מפתח אחד (early adopter)
**שלב 2**: 2-3 מפתחים נוספים
**שלב 3**: חצי מהצוות
**שלב 4**: כל הצוות

זה מאפשר לזהות בעיות מוקדם ולתקן לפני שכולם עדכנו.

### תוכנית תקשורת

**לפני העדכון:**
- הודעה בערוץ צוות
- מסמך עדכון משותף (Google Docs)
- Calendar event לזמן העדכון

**במהלך העדכון:**
- Status updates כל 10 דקות
- דיווח מיידי על בעיות

**אחרי העדכון:**
- סיכום: מה עבד, מה לא
- תיעוד בעיות ופתרונות
- לקחים לעדכון הבא

---

## Best Practices

עקרונות לניהול עדכונים ושדרוגים.

### תדירות עדכונים

**מומלץ:**
- **Production**: עדכון כל 2-4 שבועות לגרסאות stable
- **Development**: עדכון כל שבוע לגרסאות alpha/beta
- **Critical fixes**: עדכון מיידי

**לא מומלץ:**
- עדכון יומי (אלא אם אתה developer של BMAD)
- דילוג על גרסאות major (עדכן בהדרגה)

### אסטרטגיית בדיקה

**תמיד בדוק:**
1. טעינת agent בסיסי
2. הרצת workflow פשוט
3. בדיקת customizations
4. קריאת documentation מעודכנת

**לפרויקטים קריטיים:**
- יצירת test suite של workflows
- automated testing אם אפשר
- בדיקה ידנית של כל תכונה קריטית

### אסטרטגיית גיבוי

**כלל זהב: 3-2-1**
- 3 עותקים של הנתונים
- 2 סוגי מדיה שונים
- 1 עותק off-site

**לגבי BMAD:**
- Git commits (off-site ב-GitHub/GitLab)
- גיבוי מקומי (`bmad.backup/`)
- גיבוי cloud (Google Drive, Dropbox)

### תיעוד

**תעד כל עדכון:**
```markdown
# Update Log

## 2025-11-05: v6.0.0-alpha.4 → v6.0.0-alpha.5
- Reason: New 3-track system
- Issues: None
- Time: 15 minutes
- Notes: Smooth upgrade
```

זה עוזר לזהות דפוסים ובעיות חוזרות.

---

## שאלות נפוצות

### 1. כמה זמן לוקח עדכון רגיל?
**תשובה**: 5-15 דקות לעדכון רגיל. מיגרציה מ-v4 ל-v6 יכולה לקחת 30-60 דקות כולל בדיקות.

### 2. האם אני צריך לעדכן מיד כשיוצאת גרסה חדשה?
**תשובה**: לא בהכרח. אם הפרויקט שלך עובד טוב, אפשר לחכות לגרסה stable. עדכן אם יש תיקון bug קריטי או תכונה שאתה צריך.

### 3. מה קורה להתאמות האישיות שלי?
**תשובה**: כל הקבצים ב-`bmad/_cfg/` נשמרים ולא משתנים בעדכון רגיל. הם המקום המיועד להתאמות שלך.

### 4. האם אפשר לחזור לגרסה ישנה אחרי עדכון?
**תשובה**: כן! אפשר להתקין גרסה ספציפית: `npx bmad-method@6.0.0-alpha.4 install` או לשחזר מגיבוי.

### 5. מה ההבדל בין alpha, beta ו-stable?
**תשובה**: Alpha = בפיתוח, יכול להשתנות. Beta = יציב יותר, בדיקות אחרונות. Stable = מוכן לייצור.

### 6. האם אני חייב לעדכן את כל המודולים?
**תשובה**: לא. אפשר לבחור מודולים ספציפיים בזמן העדכון. אבל core צריך להיות עדכני.

### 7. מה לעשות אם העדכון נכשל באמצע?
**תשובה**: נסה להריץ שוב את `npx bmad-method install`. אם זה לא עוזר, שחזר מגיבוי ובדוק logs של npm.

### 8. האם צריך לעדכן גם את ה-IDE configuration?
**תשובה**: בדרך כלל לא. אבל אם הוסיפו agents חדשים, כדאי להריץ את המתקין שוב כדי לעדכן את ה-IDE commands.

### 9. מה קורה לקבצי PRD ו-Stories שיצרתי?
**תשובה**: הם בטוחים לחלוטין! העדכון לא נוגע בקבצי הפרויקט שלך, רק במערכת BMAD עצמה.

### 10. האם אפשר להשתמש בגרסאות שונות בפרויקטים שונים?
**תשובה**: בהחלט! כל פרויקט יכול להיות עם גרסה שונה. השתמש ב-`package.json` לניהול גרסאות.

### 11. מה זה breaking changes וכיצד לזהות אותם?
**תשובה**: Breaking changes הם שינויים שדורשים התאמות בקוד. תמיד רשומים ב-CHANGELOG תחת "Breaking Changes".

### 12. איך לדעת אם יש עדכון חדש זמין?
**תשובה**: `npm view bmad-method version` או עקוב אחרי Discord/GitHub של BMAD.

---

**סיכום**: עדכונים הם חיוניים, אבל עם הכנה נכונה וגיבויים הם פשוטים ובטוחים. תמיד קרא את ה-CHANGELOG, גבה את ההתאמות שלך, ובדוק אחרי העדכון. מיגרציה מ-v4 ל-v6 היא משמעותית, אבל המתקין עושה את רוב העבודה בשבילך.

**זכור**: אם משהו לא ברור, הקהילה של BMAD (Discord) תמיד זמינה לעזרה!

